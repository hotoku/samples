## 目標
滑らかにaからbまで変化する関数を定義する

```{r}
f1 <- function(x){
  1/(1+exp(-x))
}

x <- seq(-10, 10, length.out = 100)
plot(x, f1(x), ty="l")

f2 <- function(x, a, b){
  (b-a) * f1(x) + a
}

plot(x, f2(x, .5, 3), ty="l")

f3 <- function(x, a, b, slope, pos){
  f2(slope*(x-pos), a, b)
}
plot(x, f3(x, 0.5, 3, 1, 0), ty="l")
lines(x, f3(x, 0.5, 3, 0.3, 0), col=2)
lines(x, f3(x, 0.5, 3, 3, 0), col=3)
lines(x, f3(x, 0.5, 3, 3, 3), col=4)
lines(x, f3(x, 0.5, 3, -1, 3), col=5)


plot(x, f3(x, -1, -3, 1, 0), ty="l")


plot(x, f3(x, -3, -1, 1, 0), ty="l")
```

## slopeとa,bの関係を考える

aは0に固定する

```{r}
plot(x, f3(x, 0, 1, 1, 0), ty="l") # 基本のライン
lines(x, f3(x, 0, 2, 1, 0), col=2) # bを2倍に
lines(x, f3(x, 0, 2, 0.5, 0), col=3) # 更にslopeを半分に
```

posとaが固定されていれば、線が重なり合うことはあまりない・・？

のparameterの撮り方だと、マイナス無限遠点でaというのが固定点になっている
0の時に1になるように固定したい。

現状は、

> 基本形→y軸方向の伸縮→y軸方向のシフト→x軸方向のシフト→x軸方向の伸縮

でaからbまで変化させている。０の時１、が固定されていれば、x軸方向の伸縮は後から考えれば良い。±無限遠点でa,b、0で1と3箇所の値を指定してるので、３パラメータは動かさないとだめか。だとすると、a, bを指定した後に、x軸方向のシフトでちょうど1になるように動かしたい。f2の逆関数は、

f2(x)=(b-a)*f1(x) + a = y<br>
f1(x) = (y-a) / (b-a) <br>
x = f1^{-1} ((y-a) / (b-a))

で、f1の逆関数は

y = 1 / (1+exp(-x)) <br>
exp(-x) = 1/y - 1 <br>
x = - log(1/y - 1) <br>
x = log(y/(1-y)) 

つまり、f1^{-1}(y) = log(y/(1-y))。f2(x,a,b) = 1となるxをx0として、f3(x,a,b,slope,-x0)を考えると、これは

* 原点, +∞, -∞ で 1, b, aという値の制約を満たす
* 原点付近での立ち上がり方をslopeで調整できる

という関数になっているはず


